***5주차 1일짜 20190610 수업***

***20190610 마지막업데이트***

# Week 5 - Day 1 - 차량용 프로세서 디바이스 제어

* https://diginomica.com/softbank-shows-that-arms-future-will-remain-mobile-centric
* https://www.arm.com/company/news/2017/04/driving-next-generation-image-processing-for-automotive
* https://youtu.be/_JRMYZyFxjI?t=912

1. `Ubuntu14.04.5.vmwarevm.7z` 압축풀면 31GB 필요
2. `Ubuntu14.04.5.vmx` 실행 후 프로세서 4개로 바꾸고
3. 아래 내용 작성
    ```linux
    $ cd Desktop/
    $ tar zxf ~/Document/MDS2450/m2450.tar.gz
    $ cd m2450/lab/student/00_base_runtime/
    $ make clean; make
    ```
4. file에 open Terminal - minicom

* `subl ~/.bashrc`
* `alias m='minicom -w -D/dev/ttyUSB0'` 을 `alias m='minicom -w -D/dev/ttyS1'` 으로 변경
* 터미널 다 닫고 다시 minicom 열어서 m 누르면 
    ```
    user@linux:~/Desktop/m2450/lab/student/00_base_runtime$ m

    Welcome to minicom 2.7

    OPTIONS: I18n 
    Compiled on Jan  1 2014, 17:13:22.
    Port /dev/ttyS1, 02:44:40

    Press CTRL-A Z for help on special keys
    ```
* 성공~
* MDS2450 연결하고

minicom

* 나오는 법 컨트롤+A , X 누르고 엔터
* `sudo rm /etc/udev/rules.d/70-persistent-net.rules`
* `[sudo] password for user: 1` 입력
* 컴퓨터 끄면 다시 만들어지는. 파일이다.
  * usb device 0x:0x
컴퓨터 리부팅 sudo reboot

터미널에서 
* `sudo subl /etc/udev/rules.d/70-persistent-net.rules` 입력
* 암호는 1
  ```
  # This file was automatically generated by the /lib/udev/write_net_rules
  # program, run by the persistent-net-generator.rules rules file.
  #
  # You can modify it, as long as you keep each rule on a single
  # line, and change only the value of the NAME= key.

  # USB device 0x:0x (asix)
  SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="00:00:00:00:1a:63", ATTR{dev_id}=="0x0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth1"
  ```
  * `NAME="eth1"` , `asix` 잘 있는지 확인
  * 창 닫고
* ifconfig `eth1` 에서 `addr 192.168.0.2` 잘 있는지 확인


Tera Term 에서 입력
* `set bootdelay 1;set bootcmd 'tftp 30000000 MDS2450.bin;go 30000000' ;set serverip 192.168.0.2;set ipaddr = 192.168.0.3;save`

<!-- set bootdelay 1;set bootcmd 'tftp 30000000 MDS2450.bin;go 30000000' ;
set serverip 192.168.0.2;set ipaddr 192.168.0.3;save -->


이제 아래로

*set bootdelay 1;setenv bootcmd 'tftp 30000000 MDS2450.bin;go 30000000' ;set serverip 192.168.0.2;set ipaddr 192.168.0.3;save*

*cat /var/log/kern.log | grep tty*

*cat /etc/xinetd.d/tftp *
환경설정파일 이거 없으면 안들어야한다.


*sudo /etc/init.d/xinetd restart* 리눅스 네트워크 처리하는 서비스 데몬?
이렇게 하면 서버쪽 준비 끝

구글검색 `임베디드 tftp`

`cat /etc/udev/rules.d/70-persistent-net.rules`  장치생성

ipconfig 시스템상 가용가능 네트워크 확인

eth0 디폴트 네트워크 장치 윈도우즈랑 네트워크 카드 공유

eth1 아식스 뽑으면 안보인다.

그 파일이 자동생성된 이후에 eht1 이 생성된다. 

cat /etc/network/interfaces   읽어보면 eth1써라 써놨다.

```
auto lo
iface lo inet loopback
auto eth0
iface eth0 inet dhcp

allow-hotplug usb0
iface usb0 inet static
address 192.168.0.2
netmask 255.255.255.0
post-up service isc-dhcp-server reload

allow-hotplug eth1
iface eth1 inet static
address 192.168.0.2
netmask 255.255.255.0
gateway 192.168.0.1
#dns-nameservers 8.8.4.4 8.8.8.8
post-up service isc-dhcp-server reloaduser@linux:~/Desktop/m2450/lab/student/00_base_runtime$ 
```

꽂으면 장치는 보이지만 아이피는 없다. 

lo는 보인다. 루프백, 자기가 자기 자신

루프백장치 ping local host

리눅스에서도 아이피를 받아올 수 있데!

브릿지로 되어 있는 것을 NAT로 

sudo ifdown eth0 ifup eth0

eth0을 인터넷을 바꿔주면. 신발이 마스터로 바뀌면 인터넷 가능

---

핫플러그 디바이스 잘 꽂혔늕느 ㅈ회안

환경파일은 다 etc에 있다. 자동이 있지만 수동이 더 많다.


환경파일

네트워크 아이피 할당

etc.network/interfaces;

네트워크 동적장치 etc udev reles.d/70-persisten

#  

우분투에서에서 트리

tree -L 1


asfafasf

ffff

asvasasaaf
afs
sfafs
fas
asfsafasf


툴즈 

뉴빌드시스템



```
/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-gcc -c -I
/home/user/Desktop/m2450/lab/student/03_StartUp_Student -I
/opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/include -I
/opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2/include -g -Wall -Wstrict-prototypes -Wno-trigraphs -O0 -fno-strict-aliasing -fno-common -pipe -march=armv4t -mtune=arm9tdmi -fno-builtin -mapcs -o libc.o libc.c
/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-gcc -c -I
/home/user/Desktop/m2450/lab/student/03_StartUp_Student -I
/opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/include -I
/opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2/include -g -Wall -Wstrict-prototypes -Wno-trigraphs -O0 -fno-strict-aliasing -fno-common -pipe -march=armv4t -mtune=arm9tdmi -fno-builtin -mapcs -o Main.o Main.c
/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-gcc -c -I
/home/user/Desktop/m2450/lab/student/03_StartUp_Student -I
/opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/include -I/opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2/include -g -Wall -Wstrict-prototypes -Wno-trigraphs -O0 -fno-strict-aliasing -fno-common -pipe -march=armv4t -mtune=arm9tdmi -fno-builtin -mapcs -o Uart.o Uart.c
/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-gcc -c -I/home/user/Desktop/m2450/lab/student/03_StartUp_Student -I
/opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/include -I/opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2/include -g -Wall -Wstrict-prototypes -Wno-trigraphs -O0 -fno-strict-aliasing -fno-common -pipe -march=armv4t -mtune=arm9tdmi -fno-builtin -mapcs -o timer.o timer.c
/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-gcc -c -I/home/user/Desktop/m2450/lab/student/03_StartUp_Student -I
/opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/include -I/opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2/include -g -Wall -Wstrict-prototypes -Wno-trigraphs -O0 -fno-strict-aliasing -fno-common -pipe -march=armv4t -mtune=arm9tdmi -fno-builtin -mapcs -o exception.o exception.c
/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-gcc -c -I
/home/user/Desktop/m2450/lab/student/03_StartUp_Student -I
/opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/include -I/opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2/include -g -Wall -Wstrict-prototypes -Wno-trigraphs -O0 -fno-strict-aliasing -fno-common -pipe -march=armv4t -mtune=arm9tdmi -fno-builtin -mapcs -o s3c2450_startup.o s3c2450_startup.S
/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-gcc -c -I/home/user/Desktop/m2450/lab/student/03_StartUp_Student -I/opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/include -I/opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2/include -g -Wall -Wstrict-prototypes -Wno-trigraphs -O0 -fno-strict-aliasing -fno-common -pipe -march=armv4t -mtune=arm9tdmi -fno-builtin -mapcs -o libs.o libs.S
/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-ld --cref -Bstatic -nostartfiles -T S3C2450-RAM.ld -Map 2450main.map -o MDS2450 libc.o Main.o Uart.o timer.o exception.o s3c2450_startup.o libs.o /opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/libc.a /opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2/libgcc.a \
	-I/opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2/include -I
    /opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/include -L/opt/CodeSourcery/Sourcery_G++_Lite/arm-none-eabi/lib/libc.a -L/opt/CodeSourcery/Sourcery_G++_Lite/lib/gcc/arm-none-eabi/4.5.2 -lgcc
/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-objcopy -O binary -R .note -R .comment -S 
/home/user/Desktop/m2450/lab/student/03_StartUp_Student/MDS2450 /home/user/Desktop/m2450/lab/student/03_StartUp_Student/MDS2450.bin
cp /home/user/Desktop/m2450/lab/student/03_StartUp_Student/MDS2450.bin /tftpboot
```



`mkdir A{1..100}` 




```sh
# ~/.bashrc: executed by bash(1) for non-login shells.
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples

# If not running interactively, don't do anything
case $- in
    *i*) ;;
      *) return;;
esac

# don't put duplicate lines or lines starting with space in the history.
# See bash(1) for more options
HISTCONTROL=ignoreboth

# append to the history file, don't overwrite it
shopt -s histappend

# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=1000
HISTFILESIZE=2000

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize

# If set, the pattern "**" used in a pathname expansion context will
# match all files and zero or more directories and subdirectories.
#shopt -s globstar

# make less more friendly for non-text input files, see lesspipe(1)
[ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"

# set variable identifying the chroot you work in (used in the prompt below)
if [ -z "${debian_chroot:-}" ] && [ -r /etc/debian_chroot ]; then
    debian_chroot=$(cat /etc/debian_chroot)
fi

# set a fancy prompt (non-color, unless we know we "want" color)
case "$TERM" in
    xterm-color) color_prompt=yes;;
esac

# uncomment for a colored prompt, if the terminal has the capability; turned
# off by default to not distract the user: the focus in a terminal window
# should be on the output of commands, not on the prompt
#force_color_prompt=yes

if [ -n "$force_color_prompt" ]; then
    if [ -x /usr/bin/tput ] && tput setaf 1 >&/dev/null; then
	# We have color support; assume it's compliant with Ecma-48
	# (ISO/IEC-6429). (Lack of such support is extremely rare, and such
	# a case would tend to support setf rather than setaf.)
	color_prompt=yes
    else
	color_prompt=
    fi
fi

if [ "$color_prompt" = yes ]; then
    PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
else
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi
unset color_prompt force_color_prompt

# If this is an xterm set the title to user@host:dir
case "$TERM" in
xterm*|rxvt*)
    PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h: \w\a\]$PS1"
    ;;
*)
    ;;
esac

# enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    #alias dir='dir --color=auto'
    #alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# some more ls aliases
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'

# Add an "alert" alias for long running commands.  Use like so:
#   sleep 10; alert
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

# Alias definitions.
# You may want to put all your additions into a separate file like
# ~/.bash_aliases, instead of adding them here directly.
# See /usr/share/doc/bash-doc/examples in the bash-doc package.

if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi

# enable programmable completion features (you don't need to enable
# this, if it's already enabled in /etc/bash.bashrc and /etc/profile
# sources /etc/bash.bashrc).
if ! shopt -oq posix; then
  if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
  elif [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
  fi
fi

# PATH=$PATH:/opt/gcc-linaro-7.4.1-2019.02-x86_64_arm-eabi/bin:/opt/gcc-linaro-7.4.1-2019.02-x86_64_arm-linux-gnueabihf/bin
PATH=$PATH:/opt/gcc-linaro-6.5.0-2018.12-i686_arm-eabi/bin:/opt/gcc-linaro-6.5.0-2018.12-i686_arm-linux-gnueabihf/bin

alias pbcopy='xclip -selection clipboard'
alias pbpaste='xclip -selection clipboard -o'
alias m='minicom -w -D/dev/ttyUSB0'
# alias m='minicom -w -D/dev/ttyS1'
alias h='history'
```

```sh
$ source ~/.bashrc
```



PATH=$PATH:

     gcc-linaro-7.4.1-2019.02-x86_64_arm-eabi.tar.xz
     gcc-linaro-7.4.1-2019.02-x86_64_arm-linux-gnueabihf
/opt/gcc-linaro-6.5.0-2018.12-i686_arm-eabi/bin:
/opt/gcc-linaro-6.5.0-2018.12-i686_arm-linux-gnueabihf/bin


gcc-linaro-7.4.1-2019.02-x86_64_arm-linux-gnueabihf
gcc-linaro-7.4.1-2019.02-x86_64_arm-eabi




---
[다시 # week 5 index 로](../w05.md)

[다시 # 전 과정 main 으로](../../README.md)

